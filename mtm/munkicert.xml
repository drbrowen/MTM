<dbconfig>
  <schema>
    <name>MunkiCert</name>
    <globals>
      <global><name>LoggedInUser</name><default>1</default></global>
    </globals>
    <tables>
      <table>
        <dbname>Owner</dbname>
	<classname>T_Owner</classname>
	<primarykey>ID</primarykey>
	<attributes>
	  <attr>owner</attr>
	  <attr>session_id</attr>
	  <attr>description</attr>
	</attributes>
      </table>
      <table>
	<dbname>Computer</dbname>
	<classname>T_Computer</classname>
	<primarykey>ID</primarykey>
	<fkattributes>
	  <fkattribute><fk>Repository_ID</fk><pt>T_Repository</pt></fkattribute>
	  <fkattribute><fk>Certificate_ID</fk><pt>T_Certificate</pt></fkattribute>
	</fkattributes>
	<attributes>
	  <attr>name</attr>
	  <attr>identifier</attr>
	  <attr>status</attr>
	  <attr>forced_clientidentifier</attr>
	  <attr>rename_on_install</attr>
	  <attr>window_start_date</attr>
	  <attr>window_close_date</attr>
	  <attr>description</attr>
	</attributes>
      </table>
      <table>
	<dbname>User</dbname>
	<classname>T_User</classname>
	<primarykey>ID</primarykey>
	<attributes>
	  <attr>name</attr>
	  <attr>description</attr>
	</attributes>
      </table>
      <table>
	<dbname>UserGroup</dbname>
	<classname>T_UserGroup</classname>
	<primarykey>ID</primarykey>
	<attributes>
	  <attr>name</attr>
	  <attr>description</attr>
	</attributes>
      </table>
      <table>
	<dbname>Repository</dbname>
	<classname>T_Repository</classname>
	<primarykey>ID</primarykey>
	<attributes>
	  <attr>name</attr>
	  <attr>fullpath</attr>
	  <attr>fileprefix</attr>
	  <attr>description</attr>
	</attributes>
      </table>
      <table>
	<dbname>User_in_UserGroup</dbname>
	<classname>T_User_in_UserGroup</classname>
	<primarykey>ID</primarykey>
	<fkattributes>
	  <fkattribute><fk>User_ID</fk><pt>T_User</pt></fkattribute>
	  <fkattribute><fk>UserGroup_ID</fk><pt>T_UserGroup</pt></fkattribute>
	</fkattributes>
      </table>
      <table>
	<dbname>UserGroup_has_Repository_Permission</dbname>
	<classname>T_UserGroup_has_Repository_Permission</classname>
	<primarykey>ID</primarykey>
	<fkattributes>
	  <fkattribute><fk>UserGroup_ID</fk><pt>T_UserGroup</pt></fkattribute>
	  <fkattribute><fk>Repository_ID</fk><pt>T_Repository</pt></fkattribute>
	</fkattributes>
	<attributes>
	  <attr>portal_permission</attr>
	  <attr>repository_permission</attr>
	</attributes>
      </table>
      <table>
	<dbname>Certificate</dbname>
	<classname>T_Certificate</classname>
	<primarykey>ID</primarykey>
	<attributes>
	  <attr>privatekey</attr>
	  <attr>signrequest</attr>
	  <attr>certificate</attr>
	  <attr>status</attr>
	  <attr>subject</attr>
	  <attr>valid_from</attr>
	  <attr>valid_until</attr>
	</attributes>
      </table>
      <table>
	<dbname>ShibGroup</dbname>
	<classname>T_ShibGroup</classname>
	<primarykey>ID</primarykey>
	<attributes>
	  <attr>ad_path</attr>
	  <attr>shib_path</attr>
	  <attr>description</attr>
	</attributes>
      </table>
      <table>
	<dbname>ShibGroup_in_UserGroup</dbname>
	<classname>T_ShibGroup_in_UserGroup</classname>
	<primarykey>ID</primarykey>
	<fkattributes>
	  <fkattribute><fk>UserGroup_ID</fk><pt>T_UserGroup</pt></fkattribute>
	  <fkattribute><fk>ShibGroup_ID</fk><pt>T_ShibGroup</pt></fkattribute>
	</fkattributes>
	<attributes>
	  <attr>description</attr>
	</attributes>
      </table>
      <table>
	<dbname>UserGroup_has_UserGroup_Permission</dbname>
	<classname>T_UserGroup_has_UserGroup_Permission</classname>
	<primarykey>ID</primarykey>
	<fkattributes>
	  <fkattribute><fk>Acting_UserGroup_ID</fk><pt>T_UserGroup</pt></fkattribute>
	  <fkattribute><fk>Target_UserGroup_ID</fk><pt>T_UserGroup</pt></fkattribute>
	</fkattributes>
	<attributes>
	  <attr>description</attr>
	  <attr>portal_permission</attr>
	</attributes>
      </table>
    </tables>
    <views>
      <view>	
        <dbname>UserPermission</dbname>
	<classname>V_UserPermission</classname>
	<fkattributes>
	  <fkattribute><fk>User_ID</fk><pt>T_User</pt></fkattribute>
	  <fkattribute><fk>Repository_ID</fk><pt>T_Repository</pt></fkattribute>
	</fkattributes>
	<attributes>
	  <attr>User_name</attr>
	  <attr>portal_permission</attr>
	  <attr>repository_permission</attr>
	  <attr>Repository_name</attr>
	  <attr>Repository_fullpath</attr>
	</attributes>
      </view>
      <view>	
        <dbname>User_has_UserGroup_Permission</dbname>
	<classname>V_User_has_UserGroup_Permission</classname>
	<fkattributes>
	  <fkattribute><fk>User_ID</fk><pt>T_User</pt></fkattribute>
	  <fkattribute><fk>Acting_UserGroup_ID</fk><pt>T_UserGroup</pt></fkattribute>
	  <fkattribute><fk>Target_UserGroup_ID</fk><pt>T_UserGroup</pt></fkattribute>
	</fkattributes>
	<attributes>
	  <attr>User_name</attr>
	  <attr>portal_permission</attr>
	  <attr>Acting_UserGroup_Name</attr>
	  <attr>Target_UserGroup_Name</attr>
	</attributes>
      </view>
    </views>
  </schema>
</dbconfig>
